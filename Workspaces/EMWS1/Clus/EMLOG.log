*------------------------------------------------------------*
User:                5981538926
Date:                November 21, 2017
Time:                18:10:07
Site:                12400081
Platform:            X64_81PRO
Maintenance Release: 9.04.01M4P110916
EM Version:          14.2
* 
*------------------------------------------------------------*
* Training Log
Date:                November 21, 2017
Time:                18:09:55
*------------------------------------------------------------*
11405  proc freq data=EMWS1.Clus_VariableSet noprint;
11406  table ROLE*LEVEL/out=WORK.ClusMETA;
11407  run;
 
NOTE: There were 7 observations read from the data set EMWS1.CLUS_VARIABLESET.
NOTE: The data set WORK.CLUSMETA has 2 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
11408  proc print data=WORK.ClusMETA label noobs;
11409  var ROLE LEVEL COUNT;
11410  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
11411  title9 ' ';
11412  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
11413  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUSMETA.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11414  title10;
 
11415  data WORK.M2_RDKR2;
11416  set WORK.M2_RDKR2;
11417  if role eq 'REJECTED' then role = 'INPUT';
11418  run;
 
NOTE: There were 3 observations read from the data set WORK.M2_RDKR2.
NOTE: The data set WORK.M2_RDKR2 has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11427  *------------------------------------------------------------*;
11428  * Clus: Training;
11429  *------------------------------------------------------------*;
11430  *------------------------------------------------------------* ;
11431  * Clus: DMDBClass Macro ;
11432  *------------------------------------------------------------* ;
11433  %macro DMDBClass;
11434
11435  %mend DMDBClass;
11436  *------------------------------------------------------------* ;
11437  * Clus: DMDBVar Macro ;
11438  *------------------------------------------------------------* ;
11439  %macro DMDBVar;
11440      MeanHHSz MedHHInc RegDens
11441  %mend DMDBVar;
11442  *------------------------------------------------------------*;
11443  * Clus: Create DMDB;
11444  *------------------------------------------------------------*;
11445  proc dmdb batch data=EMWS1.Filter_TRAIN
11446  dmdbcat=WORK.Clus_DMDB
11447  maxlevel = 513
11448  out=WORK.Clus_DMDB
11449  ;
11450  var %DMDBVar;
11451  run;
 
NOTE: Records processed = 32097   Memory used = 511K.
NOTE: There were 33178 observations read from the data set MYDATA.CENSUS2000.
NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.18 seconds
      cpu time            0.07 seconds
 
NOTE: There were 33178 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 32097 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set WORK.CLUS_DMDB has 32097 observations and 3 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.20 seconds
      cpu time            0.09 seconds
 
 
11452  quit;
11453  *--- end code ---*;
 
11454  *------------------------------------------------------------* ;
11455  * Clus: Interval Inputs Macro ;
11456  *------------------------------------------------------------* ;
11457  %macro DMVQINTERVAL;
11458      MeanHHSz MedHHInc RegDens
11459  %mend DMVQINTERVAL;
11460  *------------------------------------------------------------*;
11461  * Clus: Run DMVQ procedure;
11462  *------------------------------------------------------------*;
11463  title;
11464  options nodate;
11465  proc dmvq data=WORK.Clus_DMDB dmdbcat=WORK.Clus_DMDB std=STD nominal=GLM ordinal=RANK
11466  ;
NOTE: The training set WORK.CLUS_DMDB.DATA has 3 variable(s).
NOTE: The DMVQ statement has finished with return code=0 and status=begin.
11467  input %DMVQINTERVAL / level=interval;
NOTE: 3 input variable(s) defined for ID=I1.
NOTE: The INPUT statement has finished with return code=0 and status=variables.
11468  VQ maxc = 10 clusname=_SEGMENT_ CLUSLABEL="Segment Id" DISTLABEL="Distance";
NOTE: A maximum of 10 clusters have been requested.
NOTE: The VQ statement has finished with return code=0 and status=architecture.
11469  MAKE outvar=EMWS1.Clus_OUTVAR;
 
NOTE: 3 input variable(s).
NOTE: Number of cases=32097
NOTE: Sum of frequencies=32097
NOTE: Sum of weights=32097
NOTE: VARDEF=DF
NOTE: Maximum number of categories=0
NOTE: The total number of variables is 3 with dimensionality 3.
NOTE: 3 variables will be used for clustering.
NOTE: Open output data set EMWS1.CLUS_OUTVAR.DATA with 4 variables.
NOTE: The data set EMWS1.CLUS_OUTVAR has 4 observations and 4 variables.
NOTE: The MAKE statement has finished with return code=0 and status=made.
11470  INITIAL radius=0
11471  ;
NOTE: 10 seeds were selected from data set WORK.CLUS_DMDB.DATA using the SEPARATE algorithm.
NOTE: The INITIAL statement has finished with return code=0 and status=initialized.
11472  TRAIN tech=FORGY
11473  ;
WARNING: The limit of 10 iterations was reached without convergence.
NOTE: The TRAIN statement has finished with return code=0 and status=trained.
11474  SAVE outstat=EMWS1.Clus_OUTSTAT outmean=EMWS1.Clus_OUTMEAN;
NOTE: The data set EMWS1.CLUS_OUTSTAT has 76 observations and 6 variables.
NOTE: The data set EMWS1.CLUS_OUTMEAN has 10 observations and 12 variables.
NOTE: The SAVE statement has finished with return code=0 and status=statistics.
11475  code file="C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\DMVQSCORECODE.sas"
11476  group=Clus
11477  ;
NOTE: External file C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\DMVQSCORECODE.sas opened.
NOTE: The CODE statement has finished with return code=0 and status=statistics.
11478  run;
 
11479  quit;
 
NOTE: There were 32097 observations read from the data set WORK.CLUS_DMDB.
NOTE: PROCEDURE DMVQ used (Total process time):
      real time           0.12 seconds
      cpu time            0.07 seconds
 
 
11480  libname _spdslib;
WARNING: Libref _SPDSLIB is not assigned.
 
11481  *------------------------------------------------------------*;
11482  * Clus: Cluster Label;
11483  *------------------------------------------------------------*;
11484  data EMWS1.Clus_LABEL;
11485  length _SEGMENT_ 8 Label $80;
11486  format _SEGMENT_ 4.;
11487  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))";
11488  label Label = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentLabel_vlabel,  NOQUOTE))";
11489  _SEGMENT_= 1;
11490  Label='Cluster1';
11491  output;
11492  _SEGMENT_= 2;
11493  Label='Cluster2';
11494  output;
11495  _SEGMENT_= 3;
11496  Label='Cluster3';
11497  output;
11498  _SEGMENT_= 4;
11499  Label='Cluster4';
11500  output;
11501  _SEGMENT_= 5;
11502  Label='Cluster5';
11503  output;
11504  _SEGMENT_= 6;
11505  Label='Cluster6';
11506  output;
11507  _SEGMENT_= 7;
11508  Label='Cluster7';
11509  output;
11510  _SEGMENT_= 8;
11511  Label='Cluster8';
11512  output;
11513  _SEGMENT_= 9;
11514  Label='Cluster9';
11515  output;
11516  _SEGMENT_= 10;
11517  Label='Cluster10';
11518  output;
11519  run;
 
NOTE: The data set EMWS1.CLUS_LABEL has 10 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
*------------------------------------------------------------*
* Score Log
Date:                November 21, 2017
Time:                18:09:57
*------------------------------------------------------------*
11621  proc transpose data=EMWS1.Clus_OUTVAR out=WORK.Clus_OUTVAR(rename=(COl2=NAME) where=(COL1='IMPUTED'));
11622  var MeanHHSz--RegDens;
11623  where _TYPE_ in('TYPE' 'VARIABLE');
11624  run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
11625  proc sort data=WORK.Clus_OUTVAR;
11626  by NAME;
11627  run;
 
NOTE: Input data set is empty.
NOTE: The data set WORK.CLUS_OUTVAR has 0 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11628  proc sort data=EMWS1.Clus_VariableSet(KEEP=NAME ROLE LEVEL) out=WORK.Clus_SORTEDVARS;
11629  by NAME;
11630  run;
 
NOTE: There were 7 observations read from the data set EMWS1.CLUS_VARIABLESET.
NOTE: The data set WORK.CLUS_SORTEDVARS has 7 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
 
 
11631  data WORK.Clus_OUTVAR;
11632  merge WORK.Clus_OUTVAR(in=INVAR) WORK.Clus_SORTEDVARS;
11633  by NAME;
11634  if INVAR then output;
11635  run;
 
WARNING: Multiple lengths were specified for the BY variable NAME by input data sets. This might cause unexpected results.
NOTE: There were 0 observations read from the data set WORK.CLUS_OUTVAR.
NOTE: There were 7 observations read from the data set WORK.CLUS_SORTEDVARS.
NOTE: The data set WORK.CLUS_OUTVAR has 0 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.01 seconds
 
 
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
11636  filename emflow "C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\EMFLOWSCORE.sas";
11637  *------------------------------------------------------------*;
11638  * Clus: Scoring DATA data;
11639  *------------------------------------------------------------*;
11640  data EMWS1.Clus_TRAIN
11641  / view=EMWS1.Clus_TRAIN
11642  ;
11643  set EMWS1.Filter_TRAIN
11644  ;
11645  %inc emflow;
11768  run;
 
NOTE: DATA STEP view saved on file EMWS1.CLUS_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.06 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.07 seconds
      cpu time            0.06 seconds
 
 
11769  quit;
11770  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11771  *------------------------------------------------------------*;
11772  * Clus: Computing metadata for TRAIN data;
11773  *------------------------------------------------------------*;
 
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.10 seconds
      cpu time            0.10 seconds
 
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                November 21, 2017
Time:                18:09:59
*------------------------------------------------------------*
12183  data WORK.M3627S69;
12184  set WORK.M3627S69;
12185  if role eq 'REJECTED' then role = 'INPUT';
12186  run;
 
NOTE: There were 3 observations read from the data set WORK.M3627S69.
NOTE: The data set WORK.M3627S69 has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12187  data WORK.M3627S69;
12188  set WORK.M3627S69 end=_eof_ nobs=_nobs_;
12189  output;
12190  if _eof_ then do;
12191  name = '_SEGMENT_';
12192  ROLE = 'TARGET';
12193  LEVEL = 'NOMINAL';
12194  LABEL = 'Segment Variable';
12195  TYPE = 'N';
12196  FORMAT = '';
12197  INFORMAT = '';
12198  USE='Y';
12199  output;
12200  end;
12201  run;
 
NOTE: There were 3 observations read from the data set WORK.M3627S69.
NOTE: The data set WORK.M3627S69 has 4 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12202  *------------------------------------------------------------*;
12203  * Clus: Create decision matrix;
12204  *------------------------------------------------------------*;
12205  *------------------------------------------------------------* ;
12206  * Clus: Tree Variables Macro ;
12207  *------------------------------------------------------------* ;
12208  %macro EM_TREEVARS;
12209      MeanHHSz MedHHInc RegDens
12210  %mend EM_TREEVARS;
12211  *------------------------------------------------------------* ;
12212  * Clus: Tree Targets Macro ;
12213  *------------------------------------------------------------* ;
12214  %macro EM_TREETARGETS;
12215      _SEGMENT_
12216  %mend EM_TREETARGETS;
12217  data EMWS1.EM_Clus / view=EMWS1.EM_Clus;
12218  set EMWS1.Clus_TRAIN(keep=%EM_TREEVARS %EM_TREETARGETS);
12219  run;
 
NOTE: DATA STEP view saved on file EMWS1.EM_CLUS.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.11 seconds
      cpu time            0.09 seconds
 
 
12220  *------------------------------------------------------------* ;
12221  * Clus: Interval Inputs Macro ;
12222  *------------------------------------------------------------* ;
12223  %macro INTINPUTS;
12224      MeanHHSz MedHHInc RegDens
12225  %mend INTINPUTS;
12226  *------------------------------------------------------------* ;
12227  * Clus: Binary and Nominal Inputs Macro ;
12228  *------------------------------------------------------------* ;
12229  %macro NOMINPUTS;
12230
12231  %mend NOMINPUTS;
12232  *------------------------------------------------------------* ;
12233  * Clus: Ordinal Inputs Macro ;
12234  *------------------------------------------------------------* ;
12235  %macro ORDINPUTS;
12236
12237  %mend ORDINPUTS;
12238  *------------------------------------------------------------*;
12239  * Clus: Run ARBOR procedure;
12240  *------------------------------------------------------------*;
 
12241  proc arbor data=EMWS1.EM_Clus
12242  MAXSURRS=2
12243  ;
12244  ;
12245  input %INTINPUTS
12246  / level = interval;
12247  target _SEGMENT_ / level=NOMINAL
12248  Criterion=PROBCHISQ
12249  ;
12250  ;
12251  Performance DISK
12252  ;
12253  MAKEMACRO NLEAVES=nleaves;
NOTE: 1438383 kilobytes of physical memory.
NOTE: Will use 32097 out of 32097 training cases.
NOTE: Using memory pool with 191220736 bytes.
NOTE: Passed training data 18 times.
NOTE: Training used 2439536 bytes of work memory.
NOTE: The subtree sequence contains 22 subtrees. The largest has 43 nodes and 22 leaves.
NOTE: Using subtree with 37 nodes and 19 leaves.
NOTE: Created macro variable NLEAVES equal to 19.
12254  save
12255  MODEL=EMWS1.Clus_PLOTDS
12256  SEQUENCE=EMWS1.Clus_OUTSEQ
12257  IMPORTANCE=EMWS1.Clus_OUTIMPORT
12258  NODESTAT=EMWS1.Clus_OUTNODES
12259  SUMMARY=WORK.OUTSUMMARY_TREE_2YHIC1L
12260  STATSBYNODE=WORK.OUTSTATS_TREE_2YHIC1L
12261  Pathlistnonmissing = WORK.OUTPATH_TREE_2YHIC1L
12262  Rules = WORK.OUTRULES_TREE_2YHIC1L
12263  ;
NOTE: The data set EMWS1.CLUS_OUTIMPORT has 3 observations and 5 variables.
NOTE: The data set EMWS1.CLUS_PLOTDS has 1959 observations and 4 variables.
NOTE: The data set EMWS1.CLUS_OUTNODES has 37 observations and 36 variables.
NOTE: The data set WORK.OUTPATH_TREE_2YHIC1L has 130 observations and 7 variables.
NOTE: The data set WORK.OUTRULES_TREE_2YHIC1L has 444 observations and 6 variables.
NOTE: The data set EMWS1.CLUS_OUTSEQ has 22 observations and 11 variables.
NOTE: The data set WORK.OUTSTATS_TREE_2YHIC1L has 444 observations and 5 variables.
NOTE: The data set WORK.OUTSUMMARY_TREE_2YHIC1L has 44 observations and 13 variables.
12264  run;
 
12265  quit;
 
NOTE: There were 33178 observations read from the data set MYDATA.CENSUS2000.
NOTE: There were 33178 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 32097 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS.VIEW used (Total process time):
      real time           1.20 seconds
      cpu time            1.17 seconds
 
NOTE: There were 32097 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: There were 32097 observations read from the data set EMWS1.EM_CLUS.
NOTE: The data set WORK._NAMEDAT has 10 observations and 5 variables.
NOTE: PROCEDURE ARBOR used (Total process time):
      real time           1.22 seconds
      cpu time            1.18 seconds
 
 
12266  data EMWS1.Clus_OUTIMPORT;
12267  set EMWS1.Clus_OUTIMPORT;
12268  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))" NRULES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))" IMPORTANCE =
12269     "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))" NSURROGATES = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
12270  ;
12271  run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS_OUTIMPORT.
NOTE: The data set EMWS1.CLUS_OUTIMPORT has 3 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12272  filename x "C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\ENGLISHRULES.txt" encoding='utf-8' NOBOM;
 
12273  data temp;
12274  length varname $25;
12275  retain varname;
12276  set WORK.OUTPATH_TREE_2YHIC1L;
12277  if ^missing(variable) then varname=variable;
12278  else if ^missing(var_name) then varname=var_name;
12279  output;
12280  run;
 
NOTE: There were 130 observations read from the data set WORK.OUTPATH_TREE_2YHIC1L.
NOTE: The data set WORK.TEMP has 130 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12281  proc sort data=temp;
12282  by node;
12283  run;
 
NOTE: There were 130 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 130 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12284  proc sort data=EMWS1.Clus_OUTNODES out=outnodes;
12285  by node;
12286  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_OUTNODES.
NOTE: The data set WORK.OUTNODES has 37 observations and 36 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12287  data temp;
12288  merge temp(in=_a) outnodes(keep= node
12289  NPRIORS
12290  P__SEGMENT_5
12291  P__SEGMENT_7
12292  P__SEGMENT_1
12293  P__SEGMENT_4
12294  P__SEGMENT_8
12295  P__SEGMENT_3
12296  P__SEGMENT_10
12297  P__SEGMENT_2
12298  P__SEGMENT_6
12299  P__SEGMENT_9
12300  );
12301  by node;
12302  if _a;
12303  run;
 
NOTE: There were 130 observations read from the data set WORK.TEMP.
NOTE: There were 37 observations read from the data set WORK.OUTNODES.
NOTE: The data set WORK.TEMP has 130 observations and 19 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12304  proc sort data=temp;
12305  by node descending varname descending numeric_value;
12306  run;
 
NOTE: There were 130 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 130 observations and 19 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12307  data _null_;
12308  file x;
12309  set temp;
12310  by node descending varname;
12311  retain origvar oldnode string;
12312  length origvar $32 oldnode 8 string $200;
12313  if _n_ = 1 then do;
12314  origvar = varname;
12315  oldnode = node;
12316  end;
12317  if first.node then do;
12318  put "&EM_CODEBAR";
12319  put " Node = " node;
12320  put "&EM_CODEBAR";
12321  end;
12322  if first.varname then do;
12323  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12324  if MISSING(CHARACTER_VALUE) then do;
12325  if NUMERIC_VALUE ne . then do;
12326  if ^first.node then do;
12327  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12328  end;
12329  else do;
12330  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12331  end;
12332  end;
12333  end;
12334  else do;
12335  if ^first.node then do;
12336  string= "AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12337  end;
12338  else do;
12339  string= "if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12340  end;
12341  end;
12342  end;
12343  else if RELATION in ("=") then do;
12344  if ^first.node then do;
12345  string = "AND "||strip(varname) ||" IS ONE OF: "||character_value;
12346  end;
12347  else do;
12348  string = "if "|| strip(varname) ||" IS ONE OF: "||character_value;
12349  end;
12350  end;
12351  else if RELATION in ("ISMISSING") then do;
12352  if ^first.node then do;
12353  string = " AND "|| strip(varname) || " equals Missing";
12354  end;
12355  else do;
12356  string = "if "|| strip(varname) ||" equals Missing";
12357  end;
12358  end;
12359  else if RELATION in ("ISNOTMISSING") then do;
12360  if ^first.node then do;
12361  string = " AND "|| strip(varname) || " equals All Values";
12362  end;
12363  else do;
12364  string = "if "|| strip(varname) ||" equals All Values";
12365  end;
12366  end;
12367  if ^missing(varname) then origvar = varname;
12368  oldnode=node;
12369  end;
12370  else do;
12371  if RELATION ^in ("=", "ISMISSING", "ISNOTMISSING") then do;
12372  if MISSING(CHARACTER_VALUE) then do;
12373  if NUMERIC_VALUE ne . then do;
12374  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12375  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(numeric_value);
12376  end;
12377  end;
12378  else do;
12379  if ^MISSING(string) then string= strip(string)||" AND "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12380  else string= " if "|| strip(varname)||" "||strip(relation)||" "||strip(character_value);
12381  end;
12382  end;
12383  else if RELATION in ("=") then do;
12384  string = strip(string)||", "||strip(character_value);
12385  end;
12386  else if RELATION in ("ISMISSING") then do;
12387  end;
12388  if ^missing(varname) then origvar = varname;
12389  oldnode=node;
12390  end;
12391  if last.varname then do;
12392  if RELATION in ("ISMISSING") then do;
12393  if ^first.varname then do;
12394  string = strip(string) || " or MISSING";
12395  end;
12396  end;
12397  put string;
12398  if ^missing(varname) then origvar = varname;
12399  oldnode=node;
12400  end;
12401  if last.node then do;
12402  put "then ";
12403  put " Tree Node Identifier   = " node;
12404  put " Number of Observations = " NPRIORS;
12405  put " Predicted: _SEGMENT_=5  = " P__SEGMENT_5;
12406  put " Predicted: _SEGMENT_=7  = " P__SEGMENT_7;
12407  put " Predicted: _SEGMENT_=1  = " P__SEGMENT_1;
12408  put " Predicted: _SEGMENT_=4  = " P__SEGMENT_4;
12409  put " Predicted: _SEGMENT_=8  = " P__SEGMENT_8;
12410  put " Predicted: _SEGMENT_=3  = " P__SEGMENT_3;
12411  put " Predicted: _SEGMENT_=10  = " P__SEGMENT_10;
12412  put " Predicted: _SEGMENT_=2  = " P__SEGMENT_2;
12413  put " Predicted: _SEGMENT_=6  = " P__SEGMENT_6;
12414  put " Predicted: _SEGMENT_=9  = " P__SEGMENT_9;
12415  put " ";
12416  if ^missing(varname) then origvar = varname;
12417  oldnode=node;
12418  end;
12419  run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12327:67    12330:66    12374:108   12375:72
NOTE: The file X is:
      Filename=C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\ENGLISHRULES.txt,
      RECFM=V,LRECL=131068,File Size (bytes)=0,
      Last Modified=21Nov2017:18:10:00,
      Create Time=21Nov2017:17:54:33
 
NOTE: 374 records were written to the file X.
      The minimum record length was 1.
      The maximum record length was 85.
NOTE: There were 130 observations read from the data set WORK.TEMP.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12420  filename x;
NOTE: Fileref X has been deassigned.
 
12421  /* belowtext */
12422  data templabel;
12423  set WORK.OUTRULES_TREE_2YHIC1L;
12424  if ((ROLE="PRIMARY") AND (STAT ="LABEL"));
12425  rename character_value = belowtext;
12426  keep NODE character_value;
12427  run;
 
NOTE: There were 444 observations read from the data set WORK.OUTRULES_TREE_2YHIC1L.
NOTE: The data set WORK.TEMPLABEL has 18 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12428  data tempvar;
12429  set WORK.OUTRULES_TREE_2YHIC1L;
12430  if ((ROLE="PRIMARY") AND (STAT="VARIABLE"));
12431  keep NODE character_value;
12432  run;
 
NOTE: There were 444 observations read from the data set WORK.OUTRULES_TREE_2YHIC1L.
NOTE: The data set WORK.TEMPVAR has 18 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12433  proc sort data=templabel;
12434  by node;
12435  run;
 
NOTE: There were 18 observations read from the data set WORK.TEMPLABEL.
NOTE: The data set WORK.TEMPLABEL has 18 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12436  proc sort data=tempvar;
12437  by node;
12438  run;
 
NOTE: There were 18 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 18 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
12439  data tempbelow;
12440  merge templabel tempvar;
12441  by node;
12442  if missing(belowtext) then belowtext= character_value;
12443  keep node belowtext;
12444  run;
 
NOTE: There were 18 observations read from the data set WORK.TEMPLABEL.
NOTE: There were 18 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPBELOW has 18 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12445  proc sort data=tempbelow;
12446  by node;
12447  run;
 
NOTE: There were 18 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.TEMPBELOW has 18 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12448  /* abovetext */
12449  data tempoutrules;
12450  set WORK.OUTRULES_TREE_2YHIC1L;
12451  if ((ROLE='PRIMARY') AND(STAT in ("INTERVAL", "ORDINAL", "NOMINAL")));
12452  run;
 
NOTE: There were 444 observations read from the data set WORK.OUTRULES_TREE_2YHIC1L.
NOTE: The data set WORK.TEMPOUTRULES has 18 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12453  proc sort data=tempoutrules;
12454  by node numeric_value;
12455  run;
 
NOTE: There were 18 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPOUTRULES has 18 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12456  data tempabove;
12457  set tempoutrules(rename=(node=parent));
12458  by parent numeric_value;
12459  retain abovetext tempstring flag branch origval origchar;
12460  *length abovetext tempstring origchar $45;
12461  length abovetext $256;
12462  length tempstring origchar $64;
12463  if STAT in ("INTERVAL", "ORDINAL") then do;
12464  if first.parent then do;
12465  if missing(character_value) then do;
12466  numeric_value = round(numeric_value, 0.0001);
12467  abovetext = "< "||strip(NUMERIC_VALUE);
12468  branch = 1;
12469  origval = numeric_value;
12470  output;
12471  end;
12472  else do;
12473  abovetext = "< "||strip(CHARACTER_VALUE);
12474  branch = 1;
12475  origchar = character_value;
12476  output;
12477  end;
12478  if first.parent AND last.parent then do;
12479  if missing(character_value) then do;
12480  numeric_value = round(numeric_value, 0.0001);
12481  branch = branch + 1;
12482  abovetext = ">= "||strip(NUMERIC_VALUE);
12483  output;
12484  end;
12485  else do;
12486  branch = branch + 1;
12487  abovetext = ">= "||strip(CHARACTER_VALUE);
12488  output;
12489  end;
12490  end;
12491  end;
12492  else if last.parent then do;
12493  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12494  if missing(character_value) then do;
12495  numeric_value = round(numeric_value, 0.0001);
12496  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12497  end;
12498  else do;
12499  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12500  end;
12501  branch = branch + 1;
12502  output;
12503  if missing(character_value) then do;
12504  numeric_value = round(numeric_value, 0.0001);
12505  abovetext = ">= "||strip(NUMERIC_VALUE);
12506  end;
12507  else do;
12508  abovetext = ">= "||strip(CHARACTER_VALUE);
12509  end;
12510  branch = branch + 1;
12511  output;
12512  end;
12513  else do;
12514  if missing(character_value) then do;
12515  numeric_value = round(numeric_value, 0.0001);
12516  abovetext = ">= "||strip(NUMERIC_VALUE);
12517  end;
12518  else do;
12519  abovetext = ">= "||strip(CHARACTER_VALUE);
12520  end;
12521  branch = branch + 1;
12522  output;
12523  end;
12524  end;
12525  else do;
12526  if ( missing(character_value) AND (origval ne numeric_value)) or ( ^missing(character_value) AND (origchar ne character_value)) then do;
12527  if missing(character_value) then do;
12528  numeric_value = round(numeric_value,0.0001);
12529  abovetext= "[ "||strip(origval)||", "|| strip(numeric_value)||" )";
12530  origval = numeric_value;
12531  end;
12532  else do;
12533  abovetext= ">= "||strip(origchar)||" AND < "|| strip(character_value);
12534  origchar = character_value;
12535  end;
12536  branch = branch + 1;
12537  output;
12538  end;
12539  else do;
12540  if missing(character_value) then do;
12541  numeric_value = round(numeric_value, 0.0001);
12542  abovetext = ">= "||strip(NUMERIC_VALUE);
12543  origval = numeric_value;
12544  end;
12545  else do;
12546  abovetext = ">= "||strip(CHARACTER_VALUE);
12547  origval = character_value;
12548  end;
12549  branch = branch + 1;
12550  output;
12551  end;
12552  end;
12553  end;
12554  else do;
12555  if first.numeric_value then do;
12556  flag = 0;
12557  abovetext = CHARACTER_VALUE;
12558  branch = numeric_value;
12559  if first.numeric_value AND last.numeric_value then do;
12560  output;
12561  end;
12562  end;
12563  else if last.numeric_value then do;
12564  if flag=0 then do;
12565  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12566  length = length(strip(tempstring));
12567  if length < 32 then do;
12568  abovetext = strip(tempstring);
12569  end;
12570  else do;
12571  abovetext = strip(abovetext)||", ...";
12572  flag = 1;
12573  end;
12574  end;
12575  branch = numeric_value;
12576  output;
12577  end;
12578  else do;
12579  if flag=0 then do;
12580  tempstring = strip(abovetext)||", "||CHARACTER_VALUE;
12581  length = length(strip(tempstring));
12582  if length < 32 then do;
12583  abovetext = strip(tempstring);
12584  end;
12585  else do;
12586  abovetext = strip(abovetext)||", ...";
12587  flag=1;
12588  end;
12589  end;
12590  branch = numeric_value;
12591  end;
12592  end;
12593  keep parent branch abovetext;
12594  run;
 
NOTE: Numeric values have been converted to character values at the places given by: (Line):(Column).
      12467:25   12482:26   12496:24   12496:47   12505:26   12516:26   12529:24   12529:47   12542:26
NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      12547:11
NOTE: There were 18 observations read from the data set WORK.TEMPOUTRULES.
NOTE: The data set WORK.TEMPABOVE has 36 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12595  /* MIssing value to abovetext */
12596  data tempmissing;
12597  set WORK.OUTRULES_TREE_2YHIC1L;
12598  if ((ROLE="PRIMARY") AND (STAT in ("MISSING")));
12599  rename node=parent numeric_value=branch character_value=misschar;
12600  run;
 
NOTE: There were 444 observations read from the data set WORK.OUTRULES_TREE_2YHIC1L.
NOTE: The data set WORK.TEMPMISSING has 18 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12601  proc sort data=work.tempabove;
12602  by parent branch;
12603  run;
 
NOTE: There were 36 observations read from the data set WORK.TEMPABOVE.
NOTE: The data set WORK.TEMPABOVE has 36 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12604  proc sort data=EMWS1.Clus_OUTNODES out=tempoutnodes;
12605  by parent branch;
12606  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUTNODES has 37 observations and 36 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12607  proc sort data=tempmissing;
12608  by parent branch;
12609  run;
 
NOTE: There were 18 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.TEMPMISSING has 18 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12610  data WORK.Clus_outnodes;
12611  merge work.tempabove tempoutNodes(drop=abovetext ) tempmissing(in=_a);
12612  by parent branch;
12613  length traintotal validtotal 8;
12614  retain traintotal validtotal;
12615  if _a then do;
12616  if ^MISSING(abovetext) then do;
12617  abovetext= strip(abovetext)||" %sysfunc(sasmsg(sashelp.dmine, tree_ormiss_vlabel, noquote))";
12618  end;
12619  else do;
12620  abovetext = " %sysfunc(sasmsg(sashelp.dmine, tree_missonly_vlabel, noquote))";
12621  end;
12622  end;
12623  if MISSING(abovetext) then abovetext="%sysfunc(sasmsg(sashelp.dmine, tree_nonmiss_vlabel, noquote))";
12624  if node=1 then do;
12625  traintotal = N;
12626  validtotal=VN;
12627  end;
12628  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12629  drop role rank stat misschar belowtext;
12630  run;
 
NOTE: Variable VN is uninitialized.
NOTE: There were 36 observations read from the data set WORK.TEMPABOVE.
NOTE: There were 37 observations read from the data set WORK.TEMPOUTNODES.
NOTE: There were 18 observations read from the data set WORK.TEMPMISSING.
NOTE: The data set WORK.CLUS_OUTNODES has 37 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12631  proc sort data=WORK.Clus_outnodes;
12632  by node;
12633  run;
 
NOTE: There were 37 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.CLUS_OUTNODES has 37 observations and 38 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12634  proc sort data=tempbelow;
12635  by node;
12636  run;
 
NOTE: Input data set is already sorted, no sorting done.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12637  data WORK.Clus_outnodes;
12638  merge WORK.Clus_outnodes tempbelow;
12639  by node;
12640  run;
 
NOTE: There were 37 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: There were 18 observations read from the data set WORK.TEMPBELOW.
NOTE: The data set WORK.CLUS_OUTNODES has 37 observations and 39 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: There were 33178 observations read from the data set MYDATA.CENSUS2000.
NOTE: There were 33178 observations read from the data set EMWS1.IDS_DATA.
NOTE: There were 32097 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: View EMWS1.EM_CLUS.VIEW used (Total process time):
      real time           0.20 seconds
      cpu time            0.18 seconds
 
NOTE: There were 32097 observations read from the data set EMWS1.CLUS_TRAIN.
12641  data tempoutstats;
12642  set WORK.OUTSTATS_TREE_2YHIC1L;
12643  length tarlevel $8;
12644  tarlevel ="NOMINAL";
12645  run;
 
NOTE: There were 444 observations read from the data set WORK.OUTSTATS_TREE_2YHIC1L.
NOTE: The data set WORK.TEMPOUTSTATS has 444 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12646  data EMWS1.Clus_TREE_PLOT;
12647  length NODETEXT TEXTALL $800 N NODECOLOR 8;
12648  set WORK.Clus_outnodes;
12649  label parent = "%sysfunc(sasmsg(sashelp.dmine, rpt_parentID_vlabel, noquote))" depth = "%sysfunc(sasmsg(sashelp.dmine, rpt_depth_vlabel, noquote))" belowtext= "%sysfunc(sasmsg(sashelp.dmine, rpt_belowtext_vlabel, noquote))" abovetext =
12650     "%sysfunc(sasmsg(sashelp.dmine, rpt_abovetext_vlabel, noquote))" linkwidth = "%sysfunc(sasmsg(sashelp.dmine, rpt_linkwidth_vlabel, noquote))" nodetext = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodetext_vlabel, noquote))" textall =
12651     "%sysfunc(sasmsg(sashelp.dmine, rpt_textall_vlabel, noquote))" N = "%sysfunc(sasmsg(sashelp.dmine, rpt_trainn_vlabel, noquote))" nodecolor = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodecolor_vlabel, noquote))" node =
12652     "%sysfunc(sasmsg(sashelp.dmine, rpt_node_vlabel, noquote))";
12653  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR;
12654  run;
 
NOTE: Variable TEXTALL is uninitialized.
NOTE: Variable NODECOLOR is uninitialized.
NOTE: There were 37 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
12655  proc sort data=EMWS1.Clus_TREE_PLOT;
12656  by node;
12657  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12658  proc sort data=tempoutstats;
12659  by node;
12660  run;
 
NOTE: There were 444 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set WORK.TEMPOUTSTATS has 444 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12661  data EMWS1.Clus_TREE_PLOT;
12662  merge EMWS1.Clus_TREE_PLOT tempoutstats;
12663  length text $800 _RASE_ P__SEGMENT_5 8;
12664  retain P__SEGMENT_5 eventlevel;
12665  by node;
12666  if statname='N' then N=statvalue;
12667  if statname='NPRIORS' then N=statvalue;
12668  if statname='PREDICTION' then eventlevel=category;
12669  _RASE_ = .;
12670  if tarlevel ^= 'INTERVAL' then do;
12671  if STATNAME = 'PROBABILITY' then do;
12672  if CATEGORY=EVENTLEVEL then do;
12673  nodetext = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12674  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12675  P__SEGMENT_5 = round(STATVALUE, .01);
12676  end;
12677  else do;
12678  text = right(put(strip(CATEGORY)||':', $12.))|| right(put(STATVALUE, percent13.1));
12679  end;
12680  textall = strip(textall)||'0A'x||strip( text);
12681  end;
12682  if last.node then do;
12683  nodetext = trim(nodetext)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12684  textall = trim(textall)||'0A'x||" %sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12685  output EMWS1.Clus_TREE_PLOT;
12686  end;
12687  end;
12688  else do;
12689  if statname='RASE' then _RASE_=statvalue;
12690  label _RASE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_trase_vlabel, noquote))";
12691  if STATNAME = 'PREDICTION' then do;
12692  nodetext= "%sysfunc(sasmsg(sashelp.dmine, rpt_average_vlabel, noquote))"|| put(STATVALUE, 13.4)||'0A'x|| "%sysfunc(sasmsg(sashelp.dmine, rpt_rptcount_vlabel, noquote )):"|| put(N, 13.);
12693  textall = nodetext;
12694  P__SEGMENT_5 = STATVALUE;
12695  ;
12696  ;
12697  end;
12698  if last.node then do;
12699  output EMWS1.Clus_TREE_PLOT;
12700  end;
12701  ;
12702  end;
12703  label P__SEGMENT_5 = "%sysfunc(sasmsg(sashelp.dmine, rpt_predictedvar_vlabel, noquote))";
12704  keep NODE PARENT DEPTH BELOWTEXT ABOVETEXT LINKWIDTH NODETEXT TEXTALL N NODECOLOR _RASE_ P__SEGMENT_5;
12705  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 444 observations read from the data set WORK.TEMPOUTSTATS.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
12706  data tempcolor;
12707  set WORK.OUTSTATS_TREE_2YHIC1L;
12708  retain eventlevel;
12709  if STATNAME='PREDICTION' then eventlevel=CATEGORY;
12710  run;
 
NOTE: There were 444 observations read from the data set WORK.OUTSTATS_TREE_2YHIC1L.
NOTE: The data set WORK.TEMPCOLOR has 444 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12711  data tempcolor;
12712  set tempcolor;
12713  if 'NOMINAL' ne 'INTERVAL' then do;
12714  if CATEGORY=EVENTLEVEL AND STATNAME="PROBABILITY";
12715  end;
12716  else do;
12717  if STATNAME="PREDICTION";
12718  end;
12719  run;
 
NOTE: There were 444 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 37 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12720  data tempcolor;
12721  set tempcolor;
12722  length nodecolor 8;
12723  if 'NOMINAL' ne 'INTERVAL' then do;
12724  nodecolor = round(100*(STATVALUE), .01);
12725  end;
12726  else do;
12727  nodecolor=round(statvalue, .01);
12728  end;
12729  keep node nodecolor;
12730  run;
 
NOTE: There were 37 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 37 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12731  proc sort data=EMWS1.Clus_TREE_PLOT;
12732  by node;
12733  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 12 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12734  proc sort data=tempcolor;
12735  by node;
12736  run;
 
NOTE: There were 37 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set WORK.TEMPCOLOR has 37 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12737  data EMWS1.Clus_TREE_PLOT;
12738  merge EMWS1.Clus_TREE_PLOT tempcolor;
12739  by node;
12740  length traintotal 8;
12741  retain traintotal;
12742  label traintotal = "%sysfunc(sasmsg(sashelp.dmine,  rpt_traintotal_vlabel, noquote))";
12743  if node=1 then do;
12744  traintotal = N;
12745  end;
12746  if NODE eq . then delete;
12747  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 37 observations read from the data set WORK.TEMPCOLOR.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12748  data EMWS1.Clus_TREE_PLOT;
12749  set EMWS1.Clus_TREE_PLOT;
12750  textall = "%sysfunc(sasmsg(sashelp.dmine, rpt_nodeId_vlabel, noquote, )):"|| put(Node, 13.)||'0A'x||trim(textall);
12751  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12752  data tempout;
12753  set WORK.Clus_outnodes;
12754  run;
 
NOTE: There were 37 observations read from the data set WORK.CLUS_OUTNODES.
NOTE: The data set WORK.TEMPOUT has 37 observations and 39 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12755  proc sort data=tempout;
12756  by descending P__SEGMENT_5;
12757  run;
 
NOTE: There were 37 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TEMPOUT has 37 observations and 39 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12758  data tree_temp;
12759  set tempout;
12760  if LEAF ne .;
12761  label index="%sysfunc(sasmsg(sashelp.dmine, rpt_leafindex_vlabel  , NOQUOTE))";
12762  label percevent_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_perc_train_vlabel  , NOQUOTE))";
12763  label perc_train = "%sysfunc(sasmsg(sashelp.dmine, rpt_percevent_train_vlabel  , NOQUOTE))";
12764  label tprob="%sysfunc(sasmsg(sashelp.dmine, rpt_prob_vlabel  , NOQUOTE, %nrbquote()))";
12765  tprob = round(P__SEGMENT_5, .01);
12766  percevent_train = round ( tprob*100, .01);
12767  *perc_train =round( ( N / traintotal)*100, .001);
12768  perc_train =round( ( N / traintotal), .01);
12769  if missing(perc_train) then perc_train = round( linkwidth*100, .001);
12770  index = _n_;
12771  keep NODE index tprob perc_train percevent_train
12772  ;
12773  run;
 
NOTE: There were 37 observations read from the data set WORK.TEMPOUT.
NOTE: The data set WORK.TREE_TEMP has 19 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12774  proc sort data=tree_temp;
12775  by NODE;
12776  run;
 
NOTE: There were 19 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set WORK.TREE_TEMP has 19 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12777  proc sort data=EMWS1.Clus_TREE_PLOT;
12778  by NODE;
12779  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 13 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12780  data EMWS1.Clus_TREE_PLOT;
12781  merge EMWS1.Clus_TREE_PLOT tree_temp;
12782  by NODE;
12783  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: There were 19 observations read from the data set WORK.TREE_TEMP.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12784  proc sort data=EMWS1.Clus_TREE_PLOT;
12785  by node index;
12786  run;
 
NOTE: There were 37 observations read from the data set EMWS1.CLUS_TREE_PLOT.
NOTE: The data set EMWS1.CLUS_TREE_PLOT has 37 observations and 17 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12787  title9 ' ';
12788  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_VariableImportance_title, NOQUOTE))";
12789  proc print data=EMWS1.Clus_OUTIMPORT(where=(IMPORTANCE>0)) noobs label;
12790  run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12791  title10;
 
12792  data WORK.M2DC2EM_;
12793  set WORK.M2DC2EM_;
12794  if role eq 'REJECTED' then role = 'INPUT';
12795  run;
 
NOTE: There were 7 observations read from the data set WORK.M2DC2EM_.
NOTE: The data set WORK.M2DC2EM_ has 7 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12796  proc sort data=EMWS1.Clus_OUTIMPORT out=WORK.Clus_GRAPHVARS(keep=NAME);
12797  where IMPORTANCE>0;
12798  by NAME;
12799  run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0;
NOTE: The data set WORK.CLUS_GRAPHVARS has 3 observations and 1 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12800  proc sort data = WORK.M2DC2EM_;
12801  by NAME;
12802  run;
 
NOTE: There were 7 observations read from the data set WORK.M2DC2EM_.
NOTE: The data set WORK.M2DC2EM_ has 7 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12803  data WORK.M2DC2EM_;
12804  merge WORK.M2DC2EM_ WORK.Clus_GRAPHVARS(in=_b_);
12805  by NAME;
12806  if _b_ or ROLE = "FREQ" or REPORT="Y" then output;
12807  run;
 
NOTE: There were 7 observations read from the data set WORK.M2DC2EM_.
NOTE: There were 3 observations read from the data set WORK.CLUS_GRAPHVARS.
NOTE: The data set WORK.M2DC2EM_ has 3 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12808  data WORK.M2DC2EM_;
12809  set WORK.M2DC2EM_ end=_eof_ nobs=_nobs_;
12810  output;
12811  if _eof_ then do;
12812  name = '_SEGMENT_';
12813  ROLE = 'BY';
12814  LEVEL = 'NOMINAL';
12815  LABEL = 'Segment Variable';
12816  TYPE = 'N';
12817  FORMAT = '';
12818  INFORMAT = '';
12819  output;
12820  end;
12821  run;
 
NOTE: There were 3 observations read from the data set WORK.M2DC2EM_.
NOTE: The data set WORK.M2DC2EM_ has 4 observations and 21 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
12822  *------------------------------------------------------------* ;
12823  * Clus: STDIZE Variables Macro ;
12824  *------------------------------------------------------------* ;
12825  %macro stdizevar;
12826      MeanHHSz MedHHInc RegDens
12827  %mend stdizevar;
12828  *------------------------------------------------------------*;
12829  * Clus: Computing Summary Statistics;
12830  *------------------------------------------------------------*;
12831  proc stdize
WARNING: The SAS/STAT product with which STDIZE is associated will be expiring soon, and is currently in warning mode to indicate this upcoming expiration. Please run PROC SETINIT to obtain more information on your warning period.
12832  data = EMWS1.Clus_TRAIN
12833  out=_null_
12834  outstat=WORK.Clus_STAT
12835  add=0 fuzz=1E-14 initial=MAD
12836  vardef=df
12837  method=STD
12838  mult=1
12839  pctlmtd=ORD_STAT pctldef=2
12840  pctlpts=(
12841  0
12842  100
12843  )
12844  ;
12845  var %stdizevar;
12846  run;
 
NOTE: INITIAL= will be ignored.
NOTE: There were 33178 observations read from the data set MYDATA.CENSUS2000.
NOTE: There were 33178 observations read from the data set EMWS1.IDS_DATA.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.22 seconds
      cpu time            0.20 seconds
 
NOTE: There were 32097 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: There were 32097 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: The data set WORK.CLUS_STAT has 10 observations and 4 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.24 seconds
      cpu time            0.21 seconds
 
 
12847  quit;
 
12848  data WORK.Clus_MINMAX;
12849  set WORK.Clus_STAT;
12850  where _TYPE_ in('P0','P100');
12851  if _TYPE_='P0' then _TYPE_='MIN';
12852  else if _TYPE_='P100' then _TYPE_='MAX';
12853  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS_STAT.
      WHERE _TYPE_ in ('P0', 'P100');
NOTE: The data set WORK.CLUS_MINMAX has 2 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12854  proc transpose data=WORK.Clus_MINMAX out=WORK.Clus_MINMAX(drop=_LABEL_ rename=(_NAME_=_VARIABLE_));
12855  id _TYPE_;
12856  run;
 
NOTE: There were 2 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_MINMAX has 3 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
12857  data WORK.Clus_UGRID;
12858  set WORK.Clus_MINMAX;
12859  B1 = MIN + (1-1)*(MAX-MIN)/8;
12860  B2 = MIN + (2-1)*(MAX-MIN)/8;
12861  B3 = MIN + (3-1)*(MAX-MIN)/8;
12862  B4 = MIN + (4-1)*(MAX-MIN)/8;
12863  B5 = MIN + (5-1)*(MAX-MIN)/8;
12864  B6 = MIN + (6-1)*(MAX-MIN)/8;
12865  B7 = MIN + (7-1)*(MAX-MIN)/8;
12866  B8 = MIN + (8-1)*(MAX-MIN)/8;
12867  B9 = MIN + (9-1)*(MAX-MIN)/8;
12868  drop MIN MAX;
12869  run;
 
NOTE: There were 3 observations read from the data set WORK.CLUS_MINMAX.
NOTE: The data set WORK.CLUS_UGRID has 3 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12870  *------------------------------------------------------------*;
12871  * Clus: Creating formats for binning interval variables;
12872  *------------------------------------------------------------*;
12873  proc format;
12874  value F1_
12875  0.32999999914318-1.34999999671708 = "0.33:1.35"
12876  1.34999999671708-2.36999999429099 = "1.35:2.37"
12877  2.36999999429099-3.38999999186489 = "2.37:3.39"
12878  3.38999999186489-4.4099999894388 = "3.39:4.41"
12879  4.4099999894388-5.4299999870127 = "4.41:5.43"
12880  5.4299999870127-6.44999998458661 = "5.43:6.45"
12881  6.44999998458661-7.46999998216051 = "6.45:7.47"
12882  7.46999998216051-8.48999997973442 = "7.47:8.49"
12883  ;
NOTE: Format F1_ has been output.
12884  value F2_
12885  0-25000.125 = "0:25000"
12886  25000.125-50000.25 = "25000:50000"
12887  50000.25-75000.375 = "50000:75000"
12888  75000.375-100000.5 = "75000:100001"
12889  100000.5-125000.625 = "100001:125001"
12890  125000.625-150000.75 = "125001:150001"
12891  150000.75-175000.875 = "150001:175001"
12892  175000.875-200001 = "175001:200001"
12893  ;
NOTE: Format F2_ has been output.
12894  value F3_
12895  1-13.375 = "1:13.375"
12896  13.375-25.75 = "13.375:25.75"
12897  25.75-38.125 = "25.75:38.125"
12898  38.125-50.5 = "38.125:50.5"
12899  50.5-62.875 = "50.5:62.875"
12900  62.875-75.25 = "62.875:75.25"
12901  75.25-87.625 = "75.25:87.625"
12902  87.625-100 = "87.625:100"
12903  ;
NOTE: Format F3_ has been output.
12904  run;
 
NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12905  ods listing close;
12906  ods output crosstabfreqs=WORK.TEMPFREQ;
12907  proc freq data = EMWS1.Clus_TRAIN order=formatted addnames;
12908  table MeanHHSz * _SEGMENT_ / missing;
12909  table MedHHInc * _SEGMENT_ / missing;
12910  table RegDens * _SEGMENT_ / missing;
12911  format MEANHHSZ F1_.;
12912  format MEDHHINC F2_.;
12913  format REGDENS F3_.;
12914  run;
 
NOTE: There were 33178 observations read from the data set MYDATA.CENSUS2000.
NOTE: There were 33178 observations read from the data set EMWS1.IDS_DATA.
NOTE: View EMWS1.CLUS_TRAIN.VIEW used (Total process time):
      real time           0.21 seconds
      cpu time            0.18 seconds
 
NOTE: There were 32097 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set WORK.TEMPFREQ has 297 observations and 14 variables.
NOTE: There were 32097 observations read from the data set EMWS1.CLUS_TRAIN.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.23 seconds
      cpu time            0.20 seconds
 
 
12915  quit;
12916  ods listing;
12917  data EMWS1.Clus_PROFILE(keep=_VARIABLE_ _SEGMENT_ TYPE COUNT PERCENT _X_ _XLABEL_);
12918  label _VARIABLE_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel, NOQUOTE))" _SEGMENT_ = "Segment Variable" Type = "%sysfunc(sasmsg(sashelp.dmine, rpt_type_vlabel,         NOQUOTE))" _X_ =
12919     "%sysfunc(sasmsg(sashelp.dmine, rpt_numValue_vlabel, NOQUOTE))" _XLABEL_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_fmtValue_vlabel ,    NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel,        NOQUOTE))" PERCENT =
12920     "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel,      NOQUOTE))";
12921  dsid = open("WORK.TEMPFREQ");
12922  varnum = varnum(dsid, 'ROWVARIABLE');
12923  freqnum = varnum(dsid, 'FREQUENCY');
12924  pvarnum = varnum(dsid, 'PERCENT');
12925  typenum = varnum(dsid, '_TYPE_');
12926  bynum = varnum(dsid, "_SEGMENT_");
12927  length varformat _VARIABLE_ $32 _XLABEL_ $32 TYPE $1;
12928  do while(^fetch(dsid));
12929  count = getvarn(dsid, freqnum);
12930  percent = getvarn(dsid, pvarnum);
12931  _VARIABLE_ = strip(getvarc(dsid, varnum));
12932  varblnum = varnum(dsid, _VARIABLE_);
12933  _SEGMENT_ = getvarn(dsid, bynum);
12934  type = vartype(dsid, varblnum);
12935  varformat = varfmt(dsid, varblnum);
12936  if varformat eq '' then varformat = 'best12.';
12937  _X_=.;
12938  if type = 'N' then do;
12939  _X_ = getvarn(dsid, varblnum);
12940  _XLABEL_ = left(putn(_X_, varformat));
12941  end;
12942  else _XLABEL_ = getvarc(dsid, varblnum);
12943  if getvarc(dsid, typenum) = '11' then output;
12944  end;
12945  dsid = close(dsid);
12946  run;
 
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
 
 
12947  proc sort data=EMWS1.Clus_PROFILE NOTHREADS;
12948  by _VARIABLE_ _SEGMENT_;
12949  run;
 
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12950  proc means data=EMWS1.Clus_PROFILE noprint missing NWAY;
12951  class _VARIABLE_ _SEGMENT_;
12952  var COUNT;
12953  output out=WORK.Clus_STATCOUNT(keep=_SEGMENT_ _VARIABLE_ SUM) SUM=SUM;
12954  run;
 
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set WORK.CLUS_STATCOUNT has 30 observations and 3 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
12955  proc sort data=WORK.Clus_STATCOUNT NOTHREADS;
12956  by _VARIABLE_ _SEGMENT_;
12957  run;
 
NOTE: There were 30 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set WORK.CLUS_STATCOUNT has 30 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12958  data EMWS1.Clus_PROFILE(drop=SUM);
12959  label BYPERCENT= "%sysfunc(sasmsg(sashelp.dmine, rpt_percent_vlabel, NOQUOTE, _SEGMENT_))";
12960  merge EMWS1.Clus_PROFILE WORK.Clus_STATCOUNT;
12961  by _VARIABLE_ _SEGMENT_;
12962  if SUM ne . then BYPERCENT = 100*COUNT/SUM;
12963  run;
 
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: There were 30 observations read from the data set WORK.CLUS_STATCOUNT.
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12964  proc sort data=EMWS1.Clus_PROFILE NOTHREADS;
12965  by _VARIABLE_;
12966  run;
 
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12967  proc sort data=WORK.M2DC2EM_;
12968  by Name;
12969  run;
 
NOTE: There were 4 observations read from the data set WORK.M2DC2EM_.
NOTE: The data set WORK.M2DC2EM_ has 4 observations and 21 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
12970  data EMWS1.Clus_PROFILE;
12971  merge EMWS1.Clus_PROFILE(in=_a) WORK.M2DC2EM_(keep=Name Label Role rename=(Name=_Variable_ Label=_Label_));
12972  by _Variable_;
12973  label Role = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel ,  NOQUOTE))";
12974  label Label = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel , NOQUOTE))";
12975  if _a then output;
12976  run;
 
NOTE: Variable Label is uninitialized.
WARNING: Multiple lengths were specified for the BY variable _VARIABLE_ by input data sets. This might cause unexpected results.
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: There were 4 observations read from the data set WORK.M2DC2EM_.
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
12977  proc sort data=EMWS1.Clus_PROFILE;
12978  by _SEGMENT_ _VARIABLE_ _X_;
12979  run;
 
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 10 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
12980  data EMWS1.Clus_PROFILE(rename=(_VARIABLE_=Variable _X_=NumericValue _XLABEL_=FmtValue));
12981  set EMWS1.Clus_PROFILE;
12982  retain orderedValue 0;
12983  label OrderedValue = "%sysfunc(sasmsg(sashelp.dmine, rpt_OrderedValue_vlabel, NOQUOTE))";
12984  by _SEGMENT_ _VARIABLE_;
12985  if first._variable_ then orderedValue=1;
12986  else orderedValue+1;
12987  run;
 
NOTE: There were 240 observations read from the data set EMWS1.CLUS_PROFILE.
NOTE: The data set EMWS1.CLUS_PROFILE has 240 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
12988  proc transpose data=EMWS1.Clus_OUTVAR out=WORK.Clus_OUTVAR(where=(COL1 ^in('IMPUTED','OMITTED')));
12989  var MeanHHSz--RegDens;
12990  where _TYPE_ in('TYPE' 'VARIABLE');
12991  run;
 
NOTE: There were 2 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _TYPE_ in ('TYPE', 'VARIABLE');
NOTE: The data set WORK.CLUS_OUTVAR has 3 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
12992  *------------------------------------------------------------* ;
12993  * Clus: DMVQ Variables;
12994  *------------------------------------------------------------* ;
12995  %macro dmvqvars;
12996      MeanHHSz MedHHInc RegDens
12997  %mend ;
12998
12999
 
13000  data WORK.Clus_temp;
13001  set EMWS1.Clus_OUTMEAN;
13002  _idvar_=left(put(_SEGMENT_,4.));
13003  run;
 
NOTE: There were 10 observations read from the data set EMWS1.CLUS_OUTMEAN.
NOTE: The data set WORK.CLUS_TEMP has 10 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13004  proc distance data=WORK.Clus_temp out=EMWS1.Clus_DISTANCE method=l(2) shape=square;
13005  id _idvar_;
13006  var interval(%dmvqvars);
13007  run;
 
NOTE: The data set EMWS1.CLUS_DISTANCE has 10 observations and 11 variables.
NOTE: PROCEDURE DISTANCE used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
13008  proc mds data=EMWS1.Clus_DISTANCE out=WORK.Clus_mds level=absolute nohist shape=square dim=3;
13009  object _idvar_;
13010  run;
 
NOTE: Convergence assumed because the badness-of-fit criterion 5.1331734E-8 is less than or equal to MINCRIT=1E-6.
NOTE: The data set WORK.CLUS_MDS has 11 observations and 8 variables.
NOTE: PROCEDURE MDS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13011  quit;
13012  data WORK.Clus_mds;
13013  set WORK.Clus_mds;
13014  if _type_ ne 'CONFIG' then delete;
13015  run;
 
NOTE: There were 11 observations read from the data set WORK.CLUS_MDS.
NOTE: The data set WORK.CLUS_MDS has 10 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13016  data WORK.Clus_mds(label="&label" keep=_idvar_ _radius_ dim1 dim2 dim3);
WARNING: Apparent symbolic reference LABEL not resolved.
13017  merge WORK.Clus_temp WORK.Clus_mds;
13018  run;
 
NOTE: There were 10 observations read from the data set WORK.CLUS_TEMP.
NOTE: There were 10 observations read from the data set WORK.CLUS_MDS.
NOTE: The data set WORK.CLUS_MDS has 10 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13019  options nodate;
13020  title1 "%sysfunc(sasmsg(sashelp.dmine, rpt_ClusterDistance_title, NOQUOTE))";
13021  %plotit(data=WORK.Clus_mds, datatype=mds, radii=_radius_, labelvar=_idvar_, symtype=circle, symbols='*', gout=WORK.Clus, gname=DISTANCE, gopts2=nodisplay, gopts=device=GIF, gopplot=cback=white, titlecol=black, labelcol=black, tickcol=black,
13022     framecol=black, post=C:\Users\598153~1\AppData\Local\Temp\SAS Temporary Files\_TD5020_C2059007_\plotit.ps);
 
                                                                                                                    Types Legend  | CONFIG
                                                                                                                    --------------+---------
                                                                                                                    Symbol Types  | circle
                                                                                                                    Symbols       | *
                                                                                                                    Symbol Colors | cx000000
                                                                                                                    Label  Colors | cx000000
                                                                                                                    Symbol Sizes  | 1
                                                                                                                    Label  Sizes  | 1
                                                                                                                    Symbol Fonts  | none
                                                                                                                    Label  Fonts  | none
                                                                                                                    ------------------------
WARNING: The SAS/GRAPH product with which the procedure is associated will be expiring soon, and is currently in warning mode to indicate this upcoming expiration. Please run PROC SETINIT to obtain more information on your warning period.
 
                                                                                                         Iterative Scatter Plot of Labeled Points Macro
 
                                                                                                    Iteration    Place    Line Size    Page Size    Penalty
                                                                                                    -------------------------------------------------------
                                                                                                        1          2         65           45            0
 
The following code will create the printer plot on which the graphical plot is based:
 
options nonumber ls=65 ps=45;
proc plot nolegend formchar='|----|+|---' data=preproc vtoh=2;
   plot Dim2 * Dim1 $ _idvar_ = _symbol_ /
        haxis=by 25000 vaxis=by 25000 box list=1
        placement=((h=2 -2 : s=right left) (v=1 -1 * h=0 -1 to -5 by alt));
   label Dim2 = 'Dimension 2' Dim1 = 'Dimension 1';
   label Dim2 = '#' Dim1 = '#';
   run; quit;
 
The plot was created with the following goptions:
 
goptions nodisplay hpos=71 vpos=27 hsize=8.33in vsize=6.24in cback=white device=GIF;
 
The OUT=anno Annotate data set has 281 observations.
The PLOTIT macro used 1.6 seconds to create OUT=anno.
13023  goptions display;
13024  title;
 
13025  filename gsasfile
13025! "C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\GRAPH\Distance.gif";
13026  goptions reset=all device=PNG display gaccess= gsasfile gsfmode= replace cback= white;
13027  proc greplay igout=WORK.Clus nofs;
NOTE: Building list of graphs from the catalog.
 
NOTE: Enter greplay commands or statements.
13028  replay DISTANCE;
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of
      this session.
NOTE: 19663 bytes written to
      C:\Users\5981538926\Desktop\sasProject\Workspaces\EMWS1\Clus\GRAPH\Distance.gif.
13029  quit;
 
NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.16 seconds
      cpu time            0.15 seconds
 
 
13030  goptions reset=all;
13031  filename gsasfile;
NOTE: Fileref GSASFILE has been deassigned.
 
13032  proc datasets lib=EMWS1 nolist;
13033  modify Clus_DISTANCE;
13034  rename _idvar_=_SEGMENT_;
NOTE: Renaming variable _idvar_ to _SEGMENT_.
13035  run;
 
NOTE: MODIFY was successful for EMWS1.CLUS_DISTANCE.DATA.
13036  quit;
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
13037  *------------------------------------------------------------*;
13038  * Clus: Creating data set for Input Mean report;
13039  *------------------------------------------------------------*;
13040  data temp(drop=_type_ over_all);
13041  set EMWS1.Clus_OUTSTAT;
13042  where _type_ in('DMDB_MEAN', 'CLUS_MEAN');
13043  run;
 
NOTE: There were 11 observations read from the data set EMWS1.CLUS_OUTSTAT.
      WHERE _type_ in ('CLUS_MEAN', 'DMDB_MEAN');
NOTE: The data set WORK.TEMP has 11 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13044  proc sort data=temp;
13045  by _SEGMENT_;
13046  run;
 
NOTE: There were 11 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 11 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13047  proc stdize data=temp out=stdtemp pctlpts=0 100 outstat=stat;
13048  var MeanHHSz--RegDens;
13049  run;
 
NOTE: There were 11 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.STDTEMP has 11 observations and 4 variables.
NOTE: The data set WORK.STAT has 10 observations and 4 variables.
NOTE: PROCEDURE STDIZE used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
 
 
13050  proc transpose data=stat out=tstat(rename=(COL1=MEAN COL2=STD COL3=MIN COL4=MAX));
13051  where _type_ in ('LOCATION', 'SCALE','P0', 'P100');
13052  run;
 
NOTE: There were 4 observations read from the data set WORK.STAT.
      WHERE _type_ in ('LOCATION', 'P0', 'P100', 'SCALE');
NOTE: The data set WORK.TSTAT has 3 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
 
 
13053  data tstat( rename=(_NAME_=NAME) keep=_NAME_ cv stdmin stdmax);
13054  set tstat;
13055  if std ^in (0, .) then do;
13056  stdmin = abs((min-mean)/std);
13057  stdmax = abs((max-mean)/std);
13058  end;
13059  if mean ^in(0, .) then cv = std/mean;
13060  run;
 
NOTE: There were 3 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 3 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13061  proc sort data=tstat;
13062  by NAME;
13063  run;
 
NOTE: There were 3 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTAT has 3 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13064  proc transpose data=stdtemp out=tstdtemp(rename=(_NAME_=NAME _LABEL_=LABEL COL1=MEAN));
13065  by _SEGMENT_;
13066  run;
 
NOTE: There were 11 observations read from the data set WORK.STDTEMP.
NOTE: The data set WORK.TSTDTEMP has 33 observations and 4 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
 
 
13067  proc sort data=tstdtemp;
13068  by NAME;
13069  run;
 
NOTE: There were 33 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set WORK.TSTDTEMP has 33 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13070  data tstdtemp;
13071  merge tstdtemp tstat;
13072  by NAME;
13073  STDMEAN = (MEAN + stdmin)/(stdmin + stdmax);
13074  drop stdmin stdmax mean;
13075  run;
 
NOTE: There were 33 observations read from the data set WORK.TSTDTEMP.
NOTE: There were 3 observations read from the data set WORK.TSTAT.
NOTE: The data set WORK.TSTDTEMP has 33 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13076  proc transpose data=EMWS1.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
13076! VARIABLE=INPUT));
13077  var MeanHHSz--RegDens;
13078  id _type_;
13079  where _type_ = 'VARIABLE';
13080  run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
13081  proc sort data=tempVar;
13082  by NAME;
13083  run;
 
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13084  data EMWS1.Clus_INPUTMEAN(rename=(NAME=VARIABLE));
13085  Length _SEGMENT_CHAR_ $7;
13086  label _SEGMENT_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentName_vlabel,  NOQUOTE))"
13086! _SEGMENT_CHAR_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_segmentId_vlabel,    NOQUOTE))"
13086! NAME = "%sysfunc(sasmsg(sashelp.dmine, rpt_variable_vlabel,     NOQUOTE))" INPUT =
13087     "%sysfunc(sasmsg(sashelp.dmine, rpt_input_vlabel,        NOQUOTE))" LABEL =
13087! "%sysfunc(sasmsg(sashelp.dmine, rpt_label_vlabel,        NOQUOTE))" CV =
13087! "%sysfunc(sasmsg(sashelp.dmine, rpt_cv_vlabel,           NOQUOTE))" STDMEAN =
13088     "%sysfunc(sasmsg(sashelp.dmine, rpt_normmean_vlabel,     NOQUOTE))";
13089  merge tempvar tstdtemp;
13090  by NAME;
13091  if LABEL='' then LABEL=NAME;
13092  _SEGMENT_CHAR_ = strip(put(_SEGMENT_, best.));
13093  if _SEGMENT_ = . then _SEGMENT_CHAR_='Overall';
13094  run;
 
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: There were 33 observations read from the data set WORK.TSTDTEMP.
NOTE: The data set EMWS1.CLUS_INPUTMEAN has 33 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13095  proc sort data=EMWS1.Clus_INPUTMEAN;
13096  by descending cv;
13097  run;
 
NOTE: There were 33 observations read from the data set EMWS1.CLUS_INPUTMEAN.
NOTE: The data set EMWS1.CLUS_INPUTMEAN has 33 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
 
 
13098  *------------------------------------------------------------*;
13099  * Clus: Determining the important variables;
13100  *------------------------------------------------------------*;
 
13101  %let _nobs = 0;
13102  data keepvars(rename=(NAME=INPUT));
13103  set EMWS1.Clus_OUTIMPORT(where=(IMPORTANCE>0.5)) end=eof;
13104  if eof then call symput('_nobs', strip(put(_N_, best.)));
13105  run;
 
NOTE: There were 3 observations read from the data set EMWS1.CLUS_OUTIMPORT.
      WHERE IMPORTANCE>0.5;
NOTE: The data set WORK.KEEPVARS has 3 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13106  proc transpose data=EMWS1.Clus_OUTVAR out=tempVar(drop=_LABEL_ rename=( _NAME_=NAME
13106! VARIABLE=INPUT));
13107  var MeanHHSz--RegDens;
13108  id _type_;
13109  where _type_ = 'VARIABLE';
13110  run;
 
NOTE: There were 1 observations read from the data set EMWS1.CLUS_OUTVAR.
      WHERE _type_='VARIABLE';
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
13111  proc sort data=keepvars;
13112  by INPUT;
13113  run;
 
NOTE: There were 3 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.KEEPVARS has 3 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13114  proc sort data=tempvar;
13115  by INPUT;
13116  run;
 
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: The data set WORK.TEMPVAR has 3 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13117  data vars;
13118  merge tempvar keepvars(in=b);
13119  by INPUT;
13120  if b then output;
13121  run;
 
WARNING: Multiple lengths were specified for the BY variable INPUT by input data sets. This
         might cause unexpected results.
NOTE: There were 3 observations read from the data set WORK.TEMPVAR.
NOTE: There were 3 observations read from the data set WORK.KEEPVARS.
NOTE: The data set WORK.VARS has 3 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
13122  proc sort data=vars;
13123  by descending importance;
13124  run;
 
NOTE: There were 3 observations read from the data set WORK.VARS.
NOTE: The data set WORK.VARS has 3 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13125  data _null_;
13126  set vars;
13127  if _N_=1 then call symput('CLUS_PROFVARS', strip(NAME));
13128  else call symput('CLUS_PROFVARS',symget('CLUS_PROFVARS')!!' '!!strip(NAME));
13129  run;
 
NOTE: There were 3 observations read from the data set WORK.VARS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13130  *------------------------------------------------------------*;
13131  * mergeVarMeansandClusLabel;
13132  *------------------------------------------------------------*;
13133  data temp(keep=_SEGMENT_ &CLUS_PROFVARS);
13134  length _SEGMENT_ &CLUS_PROFVARS 8;
13135  set EMWS1.Clus_OUTSTAT;
13136  where _type_ ='CLUS_MEAN';
13137  run;
 
NOTE: There were 10 observations read from the data set EMWS1.CLUS_OUTSTAT.
      WHERE _type_='CLUS_MEAN';
NOTE: The data set WORK.TEMP has 10 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
13138  proc sort data=temp;
13139  by _SEGMENT_;
13140  run;
 
NOTE: There were 10 observations read from the data set WORK.TEMP.
NOTE: The data set WORK.TEMP has 10 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
13141  data EMWS1.Clus_LABEL;
13142  merge EMWS1.Clus_LABEL(keep=_SEGMENT_ LABEL) temp;
13143  by _SEGMENT_;
13144  run;
 
NOTE: There were 10 observations read from the data set EMWS1.CLUS_LABEL.
NOTE: There were 10 observations read from the data set WORK.TEMP.
NOTE: The data set EMWS1.CLUS_LABEL has 10 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
